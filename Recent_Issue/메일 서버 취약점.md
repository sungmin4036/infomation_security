MS Exchange Server는 전자 메일, 연락처, 일정 등의 기능을 제공하는 협업 소픙트웨어.

![image](https://user-images.githubusercontent.com/62640332/159509889-47a2b0cc-6dff-4ea2-a3b2-056563a64f7a.png)

ㅁ 공격기법 개요


1. 대상 선정 : 공격자가 공격 성공 가능성이 높은 대상을 찾는 단계.   취약점 스캐너 도구, 온라인 스캔 정보 사이트를 활용, 무작위 포트 스캔 등을 통해 취약한 메일 서버를 파악.
2. 초기공격(Initial Access), 권한상승(Privilege Escalation) : 공격자는 메일서버의 취약점(CVE-2021-26855)을 공격할 수 있는 공격코드(PoC*) 등을 이용하여 공격을 수행하며, 성공 시 메일서버에 침투할수 있는 일부 권환 획득

\# PoC: Proof of Concept : 실제 공격을 할수 있는 공격 코드

3-1. 파일 쓰기 취약점 실행(Execution): 공격자는 임의의 경로에 파일을 생성하거나 수정할 수 있는 파일 쓰기 취약점 CVE-2021-26858 or CVE-2021-27065 을 악용합니다. 이를 발판으로 4-1 에서 웹셀을 생성하고 추가 공격 가능

3-2. 역직렬화 취약점 실행(Execution) : 공격자는 메일서버에 침투한후 3-1 의 방법 사용하지 않더라고 역직렬화 취약점(CVE-2021-26857)으로 관리자 권한을 획득하여  시스템 장악 가능

\# 역직렬화 취약점 : 직렬화(객체를 전송가능한 형태로 변형)된 수신 데이터를 다시 객체로 변형하는 과정에서 발생하는 취약점

4-1 지속공격(Persistence) : 공격자는 3-1에서 파일 쓰기 취약점을 사용하였으며, 이를 통해 공격자는 웹셀을 생성하거나 업로드 하였습니다. 이후 공격자는 이 웹셀들을 통하여 메일서버에 지속적인 접근하였습니다.

4-2 권한 상승(Privilege Escalation) : 공격자는 3-2의 역직렬화 취약점을 통하여 관리자 권한을 획득 하였습니다. 따라서 공격자는 메일서버를 향후 공격자가 원하는 대로 사용하기 위해 다양한 추가 공격 가능

5. 추가공격 : 공격자는 이후 자신의 목적에 따른 공격을 수행.

![image](https://user-images.githubusercontent.com/62640332/159512098-6187e3c0-86a8-49db-9f68-a11202d9b713.png)

